<!-- 2- form " array of objects " + submit "table[display all users + delete specific user] + button back to form -->
<DocType html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Web Storage</title>    
    </head>
    <body>
        <h1>Web Storage</h1>
        <form id="userForm">
            <input type="text" id="name" placeholder="Name" required />
            <input type="number" id="age" placeholder="Age" required />
            <button type="submit">Submit</button>
        </form>
        <div id="userTableDiv" style="display:none;">
            <h2>User List</h2>
            <table border="1" id="userTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Age</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- User rows will be inserted here -->
                </tbody>
            </table>
            <button id="backToFormBtn">Back to Form</button>
        </div>
        <script>
            const userForm = document.getElementById('userForm');
            const userTableDiv = document.getElementById('userTableDiv');
            const userTableBody = document.getElementById('userTable').getElementsByTagName('tbody')[0];
            const backToFormBtn = document.getElementById('backToFormBtn');

            let users = JSON.parse(localStorage.getItem('users')) || [];

            function renderUserTable() {
                userTableBody.innerHTML = '';
                users.forEach((user, index) => {
                    const row = userTableBody.insertRow();
                    row.insertCell(0).innerText = user.name;
                    row.insertCell(1).innerText = user.age;
                    const actionCell = row.insertCell(2);
                    const deleteBtn = document.createElement('button');
                    deleteBtn.innerText = 'Delete';
                    deleteBtn.onclick = () => {
                        users.splice(index, 1);
                        localStorage.setItem('users', JSON.stringify(users));
                        renderUserTable();
                    };
                    actionCell.appendChild(deleteBtn);
                });
            }

            userForm.onsubmit = (e) => {
                e.preventDefault();
                const name = document.getElementById('name').value;
                const age = document.getElementById('age').value;
                users.push({ name, age });
                localStorage.setItem('users', JSON.stringify(users));
                userForm.reset();
                userTableDiv.style.display = 'block';
                renderUserTable();
            };

            backToFormBtn.onclick = () => {
                userTableDiv.style.display = 'none';
            };
        </script>
    </body>    
</html>